<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Latihan Teks Rumpang — Sistem Pencernaan (Contoh)</title>
  <style>
    :root{
      --bg:#e6f7ff;      /* biru muda */
      --card:#ffffff;
      --accent:#2b8cff;  /* tombol biru */
      --accent-dark:#0066cc;
      --ok:#2ea44f;
      --danger:#d73a49;
      --text:#0b2545;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg,var(--bg), #f2fbff);
      color:var(--text);
      padding:20px;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .container{
      width:100%;
      max-width:900px;
      background:var(--card);
      border-radius:12px;
      box-shadow: 0 8px 24px rgba(11,37,69,0.08);
      padding:24px;
      gap:18px;
      display:flex;
      flex-direction:column;
    }
    h1{margin:0 0 6px 0; font-size:20px}
    p.lead{margin:0 0 12px 0; color:#27496d}
    .audio-wrap{
      background:rgba(43,140,255,0.06);
      border:1px solid rgba(43,140,255,0.12);
      padding:12px;
      border-radius:8px;
      display:flex;
      gap:12px;
      align-items:center;
      margin-bottom:12px;
    }
    .audio-wrap small{color:#07407a}
    .text-rumpang{
      font-size:18px;
      line-height:1.8;
      padding:14px;
      background:#f7fbff;
      border-radius:8px;
      border:1px dashed rgba(11,37,69,0.04);
    }
    .blank {
      display:inline-block;
      vertical-align:middle;
      margin:0 4px;
    }
    input.blank-input{
      width:110px;
      padding:6px 8px;
      border-radius:6px;
      border:1px solid rgba(11,37,69,0.12);
      font-size:16px;
      outline:none;
      transition:box-shadow .12s, border-color .12s;
    }
    input.blank-input:focus{box-shadow:0 0 0 4px rgba(43,140,255,0.08); border-color:var(--accent)}
    .controls{
      display:flex;
      gap:10px;
      margin-top:12px;
      flex-wrap:wrap;
    }
    button{
      border:0;
      padding:10px 14px;
      font-size:15px;
      border-radius:8px;
      cursor:pointer;
    }
    button.primary{
      background:linear-gradient(180deg,var(--accent),var(--accent-dark));
      color:white;
      box-shadow:0 6px 18px rgba(43,140,255,0.18);
    }
    button.ghost{
      background:transparent;
      color:var(--accent);
      border:1px solid rgba(43,140,255,0.12);
    }
    button.reset{
      background:#ffffff;
      color:#0b2545;
      border:1px solid rgba(11,37,69,0.06);
    }
    .result{
      margin-top:12px;
      padding:12px;
      border-radius:8px;
      font-weight:600;
    }
    .result.ok{background:rgba(46,164,79,0.08); color:var(--ok); border:1px solid rgba(46,164,79,0.12)}
    .result.bad{background:rgba(215,58,73,0.06); color:var(--danger); border:1px solid rgba(215,58,73,0.08)}
    .feedback-list{margin:8px 0 0 0; padding-left:18px; font-weight:500}
    .field-wrong{border-color:rgba(215,58,73,0.6) !important; box-shadow:0 0 0 4px rgba(215,58,73,0.06);}
    .field-right{border-color:rgba(46,164,79,0.6) !important; box-shadow:0 0 0 4px rgba(46,164,79,0.06);}
    .correct-answers{
      margin-top:8px;
      font-size:14px;
      color:#16325c;
      background:linear-gradient(180deg, rgba(43,140,255,0.03), transparent);
      padding:10px;
      border-radius:6px;
    }
    footer{font-size:13px; color:#264d72; margin-top:8px}
    @media (max-width:600px){
      input.blank-input{width:90px}
    }
  </style>
</head>
<body>
  <div class="container" role="main">
    <h1>Latihan Teks Rumpang — Dengarkan lalu lengkapi</h1>
    <p class="lead">Dengarkan audio berikut, lalu isi tempat kosong pada teks. Ketik jawaban tanpa tanda kutip. (Jawaban case-insensitive)</p>

    <div class="audio-wrap" aria-label="Audio petunjuk">
      <div>
        <audio id="audio" controls preload="none">
          <source src="https://nasrifahviedah.github.io/PBG/Audio1.mp3" type="audio/mpeg">
          Browser Anda tidak mendukung elemen audio. Buka link: 
          <a href="https://nasrifahviedah.github.io/PBG/Audio1.mp3" target="_blank" rel="noopener">https://nasrifahviedah.github.io/PBG/Audio1.mp3</a>
        </audio>
      </div>
      <div>
        <small>Putar audio, perhatikan kata-kata yang hilang, lalu isi pada kolom di samping.</small>
      </div>
    </div>

    <div class="text-rumpang" aria-label="Teks rumpang">
      Hello, my name <span class="blank">[1] <input aria-label="Jawaban 1" id="a1" class="blank-input" type="text" /></span> Achmad Wahyudi. 
      I was <span class="blank">[2] <input aria-label="Jawaban 2" id="a2" class="blank-input" type="text" /></span> in Kudus on November 13, 2025. 
      I am <span class="blank">[3] <input aria-label="Jawaban 3" id="a3" class="blank-input" type="text" /></span> and have <span class="blank">[4] <input aria-label="Jawaban 4" id="a4" class="blank-input" type="text" /></span> children. 
      I live in Bae <span class="blank">[5] <input aria-label="Jawaban 5" id="a5" class="blank-input" type="text" /></span>, Kudus. 
      I work at MTs NU Miftahul Falah Cendono Dawe Kudus as a <span class="blank">[6] <input aria-label="Jawaban 6" id="a6" class="blank-input" type="text" /></span>. 
      My hobby is mountain <span class="blank">[7] <input aria-label="Jawaban 7" id="a7" class="blank-input" type="text" /></span>.
    </div>

    <div class="controls" role="toolbar" aria-label="Kontrol">
      <button class="primary" id="checkBtn" type="button">Hasil</button>
      <button class="reset" id="resetBtn" type="button">Reset</button>
      <button class="ghost" id="showAllBtn" type="button" title="Tampilkan jawaban benar">Tampilkan Jawaban Benar</button>
    </div>

    <div id="resultArea" aria-live="polite"></div>

    <div class="correct-answers" id="answerKey" style="display:none;">
      <strong>Kunci Jawaban:</strong>
      <ol style="margin:6px 0 0 18px;">
        <li>[1] is</li>
        <li>[2] born</li>
        <li>[3] married</li>
        <li>[4] two</li>
        <li>[5] village</li>
        <li>[6] teacher</li>
        <li>[7] climbing</li>
      </ol>
    </div>

    <footer>Jika jawaban tepat → akan muncul: <strong>“Hebat. Jawaban anda benar”</strong>.<br>Jika salah → muncul: <strong>“Maaf. Jawaban anda salah”</strong> dan ditunjukkan jawaban yang keliru serta kunci jawaban benar.</footer>
  </div>

  <script>
    (function(){
      // Kunci jawaban (semua disimpan lowercase untuk perbandingan case-insensitive)
      const answers = {
        1: 'is',
        2: 'born',
        3: 'married',
        4: 'two',
        5: 'village',
        6: 'teacher',
        7: 'climbing'
      };

      // Elemen
      const inputs = {
        1: document.getElementById('a1'),
        2: document.getElementById('a2'),
        3: document.getElementById('a3'),
        4: document.getElementById('a4'),
        5: document.getElementById('a5'),
        6: document.getElementById('a6'),
        7: document.getElementById('a7')
      };
      const checkBtn = document.getElementById('checkBtn');
      const resetBtn = document.getElementById('resetBtn');
      const showAllBtn = document.getElementById('showAllBtn');
      const resultArea = document.getElementById('resultArea');
      const answerKey = document.getElementById('answerKey');

      function normalize(s){
        return String(s || '').trim().toLowerCase();
      }

      function checkAnswers(){
        // clear previous styles
        Object.values(inputs).forEach(i => { i.classList.remove('field-wrong','field-right'); });

        const wrong = [];
        const userAnswers = {};
        for (let i=1;i<=7;i++){
          const val = normalize(inputs[i].value);
          userAnswers[i] = val;
          if (val !== answers[i]) wrong.push(i);
        }

        // Build result UI
        resultArea.innerHTML = '';
        if (wrong.length === 0){
          const div = document.createElement('div');
          div.className = 'result ok';
          div.textContent = 'Hebat. Jawaban anda benar';
          resultArea.appendChild(div);
          // mark all green
          Object.values(inputs).forEach(i => i.classList.add('field-right'));
        } else {
          const div = document.createElement('div');
          div.className = 'result bad';
          div.textContent = 'Maaf. Jawaban anda salah';
          resultArea.appendChild(div);

          // Show which fields salah and berikan jawaban benar
          const ul = document.createElement('ul');
          ul.className = 'feedback-list';
          wrong.forEach(idx => {
            const li = document.createElement('li');
            const userVal = userAnswers[idx] || '(kosong)';
            li.innerHTML = `Jawaban [${idx}] salah — Anda menjawab: <em>${escapeHtml(userVal)}</em>. Jawaban benar: <strong>${escapeHtml(answers[idx])}</strong>.`;
            ul.appendChild(li);
            // style input
            inputs[idx].classList.add('field-wrong');
          });
          resultArea.appendChild(ul);

          // Mark correct fields as right
          for (let i=1;i<=7;i++){
            if (!wrong.includes(i)) inputs[i].classList.add('field-right');
          }

          // Also show full kunci singkat di bawah
          const keyDiv = document.createElement('div');
          keyDiv.style.marginTop = '10px';
          keyDiv.innerHTML = '<em>Ingin melihat semua jawaban benar? Klik "Tampilkan Jawaban Benar".</em>';
          resultArea.appendChild(keyDiv);
        }
      }

      function resetAll(){
        Object.values(inputs).forEach(i => {
          i.value = '';
          i.classList.remove('field-wrong','field-right');
        });
        resultArea.innerHTML = '';
        answerKey.style.display = 'none';
      }

      function showAllAnswers(){
        // toggle visibility of answerKey
        if (answerKey.style.display === 'none'){
          answerKey.style.display = 'block';
          showAllBtn.textContent = 'Sembunyikan Jawaban Benar';
        } else {
          answerKey.style.display = 'none';
          showAllBtn.textContent = 'Tampilkan Jawaban Benar';
        }
      }

      // Simple escaping
      function escapeHtml(s){
        return String(s)
          .replace(/&/g,'&amp;')
          .replace(/</g,'&lt;')
          .replace(/>/g,'&gt;')
          .replace(/"/g,'&quot;')
          .replace(/'/g,'&#039;');
      }

      // Event listeners
      checkBtn.addEventListener('click', checkAnswers);
      resetBtn.addEventListener('click', resetAll);
      showAllBtn.addEventListener('click', showAllAnswers);

      // Allow Enter to submit from any blank input
      Object.values(inputs).forEach(i => {
        i.addEventListener('keydown', function(e){
          if (e.key === 'Enter') {
            e.preventDefault();
            checkAnswers();
          }
        });
      });

      // Optional: accessibility, focus first input
      inputs[1].setAttribute('placeholder','ketik jawaban lalu tekan Hasil');
    })();
  </script>
</body>
</html>
